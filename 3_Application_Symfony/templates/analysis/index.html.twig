{% extends 'base.html.twig' %}

{% block title %}Hello AnalysisController!{% endblock %}

{% block body %}
<div "main-container-analysis-page">
    <h1 id = "title_analysis">Analysis</h1>
    {# Affichage des données des genres - Optionnel #}
    {#
    {% for viewLine in viewGraphFiveDim %}
                <div>
                    <div>
                        <h3>Nom du genre : {{viewLine.label}}</h3>
                        <p>Nombre de jeux : {{viewLine.nbGames}}</p>
                        <p>Note moyenne : {{viewLine.avgReviewScore}}</p>
                    </div>
                </div>
    {% endfor %} 
    #}

    <div>
        <p>This page aims to showcase visuals that provide an overview of video game sales on Steam over the past 20 years. These visuals have been designed to be impactful and highly valuable, giving you all the insights you need to identify the dominant themes for your next campaign.</p>
        <p>Next to or below each chart, complementary text has been added to clarify certain aspects and enhance understanding.</p>
        </br>
        </br>
    </div>

    {# Créer une section par graphe qui contient le canvas et le texte descriptif/explicatif #}
    <div class="ligne_graphique">
        <section class="analysis-section-graph" id="premier_graph">
            <div class="graph_R_ggplot2-container flex_container">
                <img class="graphe_R" src="{{asset('RGraph/Analysis/results/graphe_diagramme_Jeu_Annee.png')}}"></img>
            </div> 
            <div class="flex_container_texte">
                <p>The segmented bar chart, categorized by publisher skill level, aims to illustrate the dynamics of game releases over the past 20+ years. It tracks trends among different levels of creators regarding the publication of new video games.<p>
                <p>For clarity, the year 2004 was chosen as the starting point, as the number of releases prior to that was negligible.<p>
            </div>
        </section>


        <section class="analysis-section-graph" id="deuxieme_graph">
            <div class="graphPeriodGenre-container flex_container">
                {{render_chart(chart_year, {'class':"graphPeriodGenre"})}}
                
            </div> 
            <div class="flex_container_texte">
                <p>The line charts complement the analysis by offering both annual and monthly views of the total revenue generated by the category. The annual perspective enhances the first chart, while the monthly breakdown provides more precise insights into purchasing and video game release trends throughout a calendar year.<p>
                <p>All categories are represented with distinct color-coded lines.<p>
            </div>
        </section>
    </div>

    <!--<div class="ligne_graphique">-->
    <section class="analysis-section-graph ligne_graphique_texte">
        <div class="graphFiveDim-container flex_container" id="troisieme_graph">
            <canva>{{render_chart(chartFiveDim)}}</canva>
        </div>
        <div class="flex_container_texte" id="quatrieme_graph">
            <p>This scatter plot is designed to provide insights into both "strong" and "weak" categories. We relied on two highly significant variables in our context (revenue and the number of copies sold, representing volume) to shed light on this topic.<p>
            <p>To add nuance to the analysis, we decided to display the total number of games associated with each category by varying the size of the points: the more games linked to a category, the larger the corresponding point.<p>
        </div>
    </section>


    <section class="analysis-section-graph ligne_graphique_texte">
        <div class="flex_container_texte" id="quatrieme_graph">
            <p>The following scatter plot offers a more comprehensive view of the video game market on the platform. In addition to reusing familiar but central metrics (number of copies sold and revenue), we incorporated two additional dimensions: the color of the points to represent the game's rating and their shape to indicate the publisher's skill level.<p>
            <p>This chart's inclusion is justified by the desire to explore these key variables in our context from different perspectives. By reusing previously analyzed variables in combination with new dimensions, the scatter plot enables multiple interpretations of the data through diverse analytical lenses.<p>
            <p>Similar to the analysis examining the relationship between well-rated games and average playtime, this chart explores the correlations between a game's economic success and its popularity. While these two variables often align, it could be worthwhile, in the context of a relaunch strategy, to highlight a profitable game that may not have been fully appreciated by the community due to potentially unjust reasons.<p>
        </div>
        <div class="graph_R_ggplot2-container flex_container" id="troisieme_graph">
            <img class="graphe_R" src="{{asset('RGraph/Analysis/results/quatre_dimensions_copy_sold_revenue.png')}}"></img>
        </div>
    </section>
    <!--</div>-->
    

    <div class="container_multi_graph_texte">
        <section class="analysis-section-graph" id="multi_graph_display">
            <div class="graph_R_ggplot2-container">
                <div class="container_multi_graph">
                    <img class="graphe_R multi_graph" src="{{asset('RGraph/Analysis/results/GameAAARevPerHours.png')}}"></img>
                    <img class="graphe_R multi_graph" src="{{asset('RGraph/Analysis/results/GameAARevPerHours.png')}}"></img>
                    <img class="graphe_R multi_graph" src="{{asset('RGraph/Analysis/results/GameHobbyistRevPerHours.png')}}"></img>
                    <img class="graphe_R multi_graph" src="{{asset('RGraph/Analysis/results/GameIndieRevPerHours.png')}}"></img>
                </div>
            </div> 
        </section>
        
        <section id="texte_multi_graph">
            <div class="flex_container_texte">
                <p>Building on the bar chart illustrating the evolution of game releases, we created a scatter plot that represents each production based on its rating and the number of hours played. For clarity, this chart has been independently produced for the four publisher levels.<p>
                <p>The purpose of these visuals is to address a practical question: should Steam prioritize games with longer average playtimes to satisfy the community (as indicated by high review scores)?<p>
                <p>According to our analysis, Steam may benefit more from focusing on shorter-duration games, allowing the community to try multiple titles. A "monopoly" scenario where a single major game dominates could raise visibility issues for other productions.<p>
                <p>That said, longer playtimes can also be seen as a sign of players deeply engaging with the content, which could reflect strong satisfaction and loyalty.<p>
                <p>These charts offer a perspective to help guide the selection for the next campaign.<p>
            </div>
        </section>
    </div>

    <!--Mettre graphs ACP ggplot2-->
    <section class="analysis-section-graph">
        <div class="graph_2-container flex_container">
            {# tentative d'insertion du graphe plotly sans succès #}
            {#{{ dump(asset('RGraph/results/analysis/graphe_cluster_projection_acp.html')) }}#}
            {#
            {{ dump("/assets/RGraph/results/analysis/Test-0fb7a252b21173803b187e50ed370952.html"|)}}
            {{dump(preg_replace('(-[A-Za-z0-9]+)(.html)$', '$2', "/assets/RGraph/results/analysis/Test-0fb7a252b21173803b187e50ed370952.html"))}}
            {{ dump(asset('RGraph/results/analysis/Test.html'))}}
            
            {{dump('test.hmtl'|slice(-4, 'test.hmtl'|length))}}
            {{dump('-0fb7a252b21173803b187e50ed370952.hmtl'|length)}}
            {{dump(asset('RGraph/results/analysis/Test.html')|slice(-38, asset('RGraph/results/analysis/Test.html')|length))}}
            {% include asset('RGraph/results/analysis/Test.html')|slice(0, -38)~".html" %}
            {{include(asset('RGraph/results/analysis/Test.html'))}}
            #}
        </div> 
        <div class="flex_container_texte">
            <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat.<p>
        </div>
    </section>

    <!--test graph remy avec le code qui n'a pas pu etre visualisé (la page analysis chez moi ne marche pas) -->

    <div class="container_multi_graph_acp">
        <section class="analysis-acp-graph">
            <div class="graph_R_ggplot2-container">
                <div class="container_multi_graph">
                    <img class="graphe_R multi_graph" src="{{asset('RGraph/Analysis/results/ACP_cluster_2_axes.png.png')}}"></img>
                    <img class="graphe_R multi_graph" src="{{asset('RGraph/Analysis/results/ACP_indiv_var.png')}}"></img>
                </div>
            </div> 
        </section>
        
        <section id="texte_multi_graph">
            <div class="flex_container_texte">
                <p>ojezfiuhzalfihagaugyfu</p>
            </div>
        </section>
    </div>


    <section class="analysis-section-graph" id="deuxieme_graph">
            <div class="graphPeriodGenre-container flex_container">
                {{render_chart(chart_month, {'class':"graphPeriodGenre"})}}
                
            </div> 
            <div class="flex_container_texte">
                <p>The line charts complement the analysis by offering both annual and monthly views of the total revenue generated by the category. The annual perspective enhances the first chart, while the monthly breakdown provides more precise insights into purchasing and video game release trends throughout a calendar year.<p>
                <p>All categories are represented with distinct color-coded lines.<p>
            </div>
    </section>

    
</div>
{% endblock %}